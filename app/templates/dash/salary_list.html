{% extends 'dash/base.html' %}

<title>{% block title %} MahavirTent-salary_list {% endblock %}</title>
<!-- Bootstrap CSS -->

<!-- Main Content -->
{% block content %}

    <!-- Main Content -->
    <main class="main-content">
      <div class="d-flex justify-content-between align-items-center px-4">
       <div class="header" style="color:white ;">
            <h2 class="px-4">Salary List</h2>
        </div>

        <form method="get" class="d-flex align-items-center">
          <div class="input-group">
            <input type="text" name="q" class="form-control" placeholder="Search here..." value="{{ query }}">
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </form>

      </div>


      <div class="container-fluid mt-4">
        <div class="card shadow">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0 text-dark">ðŸŸ©</h5>
            <!-- <button class="btn btn-success btn-sm"><i class="fas fa-file-export me-2"></i> Export</button> -->
               <a href="{% url 'add_salary' %}" class="btn btn-dark" 
               style="border-radius: 30px; font-weight: bold; min-width: 120px; text-align: center;">
                Add Salary
            </a>
          </div>
          <div class="table-responsive p-3">
            <table class="table align-items-center mb-0">
              <thead>
                <tr>
                  <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7 ps-2">No.</th>
                  <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7 ps-2">Staff Name</th>
                  <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7 ps-2">Date</th>
                  <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7 ps-2">Basic Salary</th>
                  <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7 ps-2">Allowance</th>
                  <th class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-7">Deduction
                  </th>
                  <th class="text-center text-uppercase text-secondary text-sm font-weight-bolder opacity-7">Net Salary
                  </th>
                  <th class="text-center text-uppercase text-secondary text-sm font-weight-bolder opacity-7">Status</th>
                  <th class="text-center text-uppercase text-secondary text-sm font-weight-bolder opacity-7">Action</th>

                </tr>
              </thead>
              <tbody>
                {% for salary in salaries %}
                <tr>
                  <td class="align-middle">{{ forloop.counter }}</td>

                  <td class="align-middle">
                    <p class="text font-weight-bold mb-0">{{ salary.staff.name }}</p>
                  </td>
                  <td class="align-middle">
                    <p class="texs font-weight-bold mb-0">{{ salary.month_date }}</p>
                  </td>
                  <td class="align-middle">
                    <p class="text font-weight-bold mb-0">{{ salary.basic_salary }}</p>
                  </td>
                  <td class="align-middle">
                    <p class="text font-weight-bold mb-0">{{ salary.allowance }}</p>
                  </td>
                  <td class="align-middle text-center">
                    <span class="text font-weight-bold">{{ salary.deduction }}</span>
                  </td>
                  <td class="align-middle text-center"><strong>
                      <span class="text font-weight-bold">{{ salary.net_salary }}</span></strong>
                  </td>
                  <td class="align-middle text-center text-sm">
                    {% if salary.status == "Paid" %}
                    <span
                      style="background-color: rgba(0, 128, 0, 0.2); color: green; padding: 5px 10px; border-radius: 8px;">Paid</span>
                    {% else %}
                    <span
                      style="background-color: rgba(255, 0, 0, 0.2); color: red; padding: 5px 10px; border-radius: 8px;">Unpaid</span>
                    {% endif %}
                  </td>
                  <td class="align-middle text-center">
                    <a href="{% url 'edit_salary' salary.id %}" class="btn btn-sm btn-primary">
                      <i class="fas fa-edit"></i> Edit
                    </a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>

            <!-- Pagination -->
            <div class="d-flex justify-content-center mt-4 mb-4">
              <nav aria-label="Page navigation">
                <ul class="pagination">
                  {% if salaries.has_previous %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ salaries.previous_page_number }}{% if query %}&q={{ query }}{% endif %}">Previous</a>
                  </li>
                  {% else %}
                  <li class="page-item disabled"><span class="page-link">Previous</span></li>
                  {% endif %}

                  {% for num in salaries.paginator.page_range %}
                  {% if salaries.number == num %}
                  <li class="page-item active"><span class="page-link">{{ num }}</span></li>
                  {% else %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ num }}{% if query %}&q={{ query }}{% endif %}">{{ num }}</a>
                  </li>
                  {% endif %}
                  {% endfor %}

                  {% if salaries.has_next %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ salaries.next_page_number }}{% if query %}&q={{ query }}{% endif %}">Next</a>
                  </li>
                  {% else %}
                  <li class="page-item disabled"><span class="page-link">Next</span></li>
                  {% endif %}
                </ul>
              </nav>
            </div>


          </div>
        </div>
      </div>
    </main>
{% endblock %}
  </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    xintegrity="sha384-YvpcrYf0tY3lHB60NNWqQWpsdYh/yJ83G1K9aA46Gq6Q0XpQY5R0J3q4z1A8W4A5l1yWpQ8B8T0Jb5K6f8E6"
    crossorigin="anonymous"></script>

</body>

</html>