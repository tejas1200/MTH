{% extends 'dash/base.html' %}

<title>{% block title %} MahavirTent-Edit_staff {% endblock %}</title>
<!-- Bootstrap CSS -->


<!-- Main Content -->
{% block content %}

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="header" style="color:white;">
                <h2 class="px-4">Update Staff Details</h2>
            </div>
            <div class="container-fluid mt-4">
                <div class="card form-card">
                    <div class="card-body">
                        <form action="" method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="mb-3">
                                <label for="staffName" class="form-label">Name</label>
                                <input type="text" class="form-control" id="staffName" name="name" value="{{ staff.name }}" required>
                            </div>

                            <div class="mb-3">
                                <label for="staffPhone" class="form-label">Phone</label>
                                <input type="text" class="form-control" id="staffPhone" name="phone" value="{{ staff.phone }}" required>
                            </div>

                            <div class="mb-3">
                                <label for="staffRole" class="form-label">Role</label>
                                <input type="text" class="form-control" id="staffRole" name="role" value="{{ staff.role }}" required>
                            </div>

                            <div class="mb-3">
                                <label for="staffAddress" class="form-label">Address</label>
                                <textarea class="form-control" id="staffAddress" name="address" rows="3">{{ staff.address }}</textarea>
                            </div>

                            <div class="mb-3">
                                <label for="staffPhoto" class="form-label">Photo</label><br>
                                {% if staff.photo %}
                                <img src="{{ staff.photo.url }}" alt="Current Photo" width="100" class="mb-2"><br>
                                {% endif %}
                                <input type="file" class="form-control" id="staffPhoto" name="photo">
                            </div>
<!-- 
                            <div class="mb-3">
                                <label for="staffStatus" class="form-label">Status</label>
                                <select class="form-select" id="staffStatus" name="is_active">
                                    <option value="True">Active</option>
                                    <option value="False">Inactive</option>
                                </select>
                            </div> -->

                            <div class="d-flex justify-content-end">
                                <button type="submit" class="btn btn-primary rounded-pill me-2 mt-3">Update</button>
                                <!-- The delete button that opens the modal -->
                                <button type="button" class="btn btn-danger rounded-pill px-4 py-2 mt-3 btn-custom-delete" data-bs-toggle="modal" data-bs-target="#deleteStaffModal">
                                    Delete
                                </button>
                                <button type="back" class="btn btn-secondary rounded-pill me-2 mt-3" style="margin-left:8px;">Back</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
{% endblock %}
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteStaffModal" tabindex="-1" aria-labelledby="deleteStaffModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteStaffModalLabel">Confirm Deletion</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this staff member?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Cancel</button>
                    <!-- The actual delete link -->
                    <a href="{% url 'delete_staff' staff.id %}" class="btn btn-danger rounded-pill">
                        Delete
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNWqQWpsdYh/yJ83G1K9aA46Gq6Q0XpQY5R0J3q4z1A8W4A5l1yWpQ8B8T0Jb5K6f8E6" crossorigin="anonymous"></script>
</body>
</html>
